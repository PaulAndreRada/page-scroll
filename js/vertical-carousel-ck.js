$(function(){var e=function(e){var t={},n=$(document),r=n.find(e),i=r.find("ul"),s=i.find("li"),o=0,u=s.length,a=0,f=450,l;t.init=function(){t.setPaneDimensions();$(window).on("load resize orientationchange",function(){t.setPaneDimensions()});return t};t.setPaneDimensions=function(){o=r.height();for(var e=0;e<u;e++)s.height(o);i.height(o*u);return t};t.showPane=function(e){var e=Math.max(0,Math.min(e,u-1));a=e;var n=-(100/u*a);t.setContainerOffset(n,!0);return t};t.setContainerOffset=function(e,t){i.removeClass("animate");t&&i.addClass("animate");if(Modernizr.csstransforms3d)i.css("transform","translate3d(0,"+e+"%,0) scale3d(1,1,1)");else if(Modernizr.csstransforms)i.css("transform","translate(0,"+e+"%)");else{var n=o*u/100*e;i.css("top",n+"px")}};t.next=function(){return t.showPane(a+1)};t.prev=function(){return t.showPane(a-1)};var c=function(e){e.gesture.preventDefault();switch(e.type){case"dragup":case"dragdown":var n=-(100/u)*a,r=100/o*e.gesture.deltaY/u;console.log(e.gesture.deltaY);if(a==0&&e.gesture.direction==Hammer.DIRECTION_DOWN||a==u-1&&e.gesture.direction==Hammer.DIRECTION_UP)r*=.4;t.setContainerOffset(r+n);console.log("drag");console.log("setOffset");break;case"swipeup":t.next();e.gesture.stopDetect();console.log("swipeUp");console.log("next");break;case"swipedown":t.prev();e.gesture.stopDetect();console.log("swipeDown");console.log("prev");break;case"release":if(Math.abs(e.gesture.deltaY)>o/2)if(e.gesture.direction==="down"){t.prev();console.log("release");console.log("prev")}else{console.log("release");console.log("next");t.next()}else{t.showPane(a,!0);console.log("else");console.log("show pane")}}console.log("currentPane :"+a)};$(window).scroll(function(e){var n=$(this),r=(new Date).getTime();if(l+f>=r){e.preventDefault();e.stopPropagation();return console.log("cancel scroll")}if(n.scrollTop()===1){e.preventDefault();e.stopPropagation();t.next();l=r}else if(n.scrollTop()===-1){e.preventDefault();e.stopPropagation();t.prev();l=r}else console.log($(this).scrollTop())});r.hammer({drag_to_lock_target:!0}).on("release dragdown dragup swipeleft swiperight swipeup swipedown",c);return t},t=e("#carousel");console.log(t);t.init()});